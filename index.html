<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Widget Builder</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&family=M+PLUS+Rounded+1c&family=Kosugi+Maru&family=Shippori+Mincho+B1&family=Zen+Maru+Gothic&family=Noto+Serif+JP&display=swap" rel="stylesheet">
  <style>
    body {
      margin: 0;
      display: flex;
      height: 100vh;
      font-family: 'Noto Sans JP', sans-serif;
      background: #edf0f5;
    }
    .sidebar {
      width: 340px;
      background: rgba(255, 255, 255, 0.75);
      backdrop-filter: blur(10px);
      padding: 30px;
      box-sizing: border-box;
      border-right: 1px solid rgba(200, 200, 200, 0.4);
      overflow-y: auto;
      display: flex;
      flex-direction: column;
      gap: 30px;
      box-shadow: 4px 0 10px rgba(0,0,0,0.05);
    }
    .card {
      background: rgba(255, 255, 255, 0.9);
      border-radius: 20px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
      padding: 24px;
    }
    .main {
      flex-grow: 1;
      background: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 60px;
    }
    .widget {
      display: flex;
      justify-content: center;
      align-items: center;
      text-align: center;
      white-space: pre-wrap;
      font-weight: bold;
      background-color: #191970;
      color: #ffffff;
      width: 300px;
      height: 150px;
      border-radius: 20px;
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
      padding: 10px;
      box-sizing: border-box;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-size: 15px;
      font-weight: 600;
      color: #333;
    }
    input, select {
      width: 100%;
      box-sizing: border-box;
      padding: 12px 14px;
      font-size: 15px;
      margin-bottom: 20px;
      border: 1px solid #ccc;
      border-radius: 12px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
      background: rgba(255,255,255,0.8);
      backdrop-filter: blur(4px);
      outline: none;
    }
    .color-input-container {
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .color-preview {
      width: 30px;
      height: 30px;
      border-radius: 8px;
      border: 1px solid #ccc;
      cursor: pointer;
      background: #191970;
    }
    #colorPopup {
      position: absolute;
      background: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      border-radius: 12px;
      padding: 16px;
      display: none;
      flex-direction: column;
      gap: 12px;
      z-index: 1000;
    }
    .color-swatch {
      width: 28px;
      height: 28px;
      border-radius: 6px;
      border: 1px solid #ccc;
      cursor: pointer;
      display: inline-block;
    }
    .swatch-section {
      margin-top: 10px;
    }
    .swatch-section h4 {
      margin: 8px 0 4px;
      font-size: 12px;
      font-weight: bold;
      color: #555;
    }
  </style>
</head>

<body>

<div class="sidebar">
  <div class="card">
    <h2>ウィジェット設定</h2>

    <label for="text">テキスト</label>
    <textarea id="text" style="height:80px; resize: vertical;">こんにちは！</textarea>

    <label for="fontSize">文字サイズ(px)</label>
    <input type="number" id="fontSize" value="24">

    <label>背景色</label>
    <div class="color-input-container">
      <input type="text" id="bgColor" value="#191970">
      <div id="bgColorPreview" class="color-preview"></div>
    </div>

    <div id="colorPopup">
      <input type="color" id="bgColorPicker" style="width:100%; height:40px;">
      <div class="swatch-section">
        <h4>Notion Light</h4>
        <div>
          <div class="color-swatch" style="background:#FFFFFF" data-color="#FFFFFF"></div>
          <div class="color-swatch" style="background:#F1F1EF" data-color="#F1F1EF"></div>
          <div class="color-swatch" style="background:#F4EEEE" data-color="#F4EEEE"></div>
          <div class="color-swatch" style="background:#FBECDD" data-color="#FBECDD"></div>
          <div class="color-swatch" style="background:#FBF3DB" data-color="#FBF3DB"></div>
          <div class="color-swatch" style="background:#EDF3EC" data-color="#EDF3EC"></div>
          <div class="color-swatch" style="background:#E7F3F8" data-color="#E7F3F8"></div>
          <div class="color-swatch" style="background:#F6F3F9" data-color="#F6F3F9"></div>
          <div class="color-swatch" style="background:#F8F3F2" data-color="#F8F3F2"></div>
          <div class="color-swatch" style="background:#FDEBEC" data-color="#FDEBEC"></div>
        </div>
      </div>
      <div class="swatch-section">
        <h4>Notion Dark</h4>
        <div>
          <div class="color-swatch" style="background:#2F3437" data-color="#2F3437"></div>
          <div class="color-swatch" style="background:#3F4042" data-color="#3F4042"></div>
          <div class="color-swatch" style="background:#64473A" data-color="#64473A"></div>
          <div class="color-swatch" style="background:#7B5A36" data-color="#7B5A36"></div>
          <div class="color-swatch" style="background:#735C30" data-color="#735C30"></div>
          <div class="color-swatch" style="background:#314C40" data-color="#314C40"></div>
          <div class="color-swatch" style="background:#2D545E" data-color="#2D545E"></div>
          <div class="color-swatch" style="background:#44355B" data-color="#44355B"></div>
          <div class="color-swatch" style="background:#5B3446" data-color="#5B3446"></div>
          <div class="color-swatch" style="background:#5C2B29" data-color="#5C2B29"></div>
        </div>
      </div>
    </div>

    <div style="margin-top: 30px;">
      <h3>このウィジェットのリンク</h3>
      <input type="text" id="generatedUrl" readonly>
    </div>
  </div>
</div>

<div class="main">
  <div class="widget" id="widget">
    こんにちは！
  </div>
</div>

<script>
const widget = document.getElementById('widget');
const bgColorInput = document.getElementById('bgColor');
const bgColorPreview = document.getElementById('bgColorPreview');
const bgColorPicker = document.getElementById('bgColorPicker');

function updateWidget() {
  const text = document.getElementById('text').value;
  const bgColor = bgColorInput.value;
  const fontSize = document.getElementById('fontSize').value;

  widget.innerText = text;
  widget.style.backgroundColor = bgColor;
  widget.style.fontSize = fontSize + 'px';

  const baseUrl = window.location.origin + window.location.pathname.replace('index.html', 'widget.html');
  const url = `${baseUrl}?text=${encodeURIComponent(text)}&bgColor=${encodeURIComponent(bgColor)}&fontSize=${fontSize}`;
  document.getElementById('generatedUrl').value = url;
}

bgColorInput.addEventListener('input', () => {
  bgColorPreview.style.background = bgColorInput.value;
  bgColorPicker.value = bgColorInput.value;
  updateWidget();
});

bgColorPreview.addEventListener('click', (e) => {
  e.stopPropagation();
  const popup = document.getElementById('colorPopup');
  popup.style.display = popup.style.display === 'block' ? 'none' : 'block';
});

bgColorPicker.addEventListener('input', () => {
  bgColorInput.value = bgColorPicker.value;
  bgColorPreview.style.background = bgColorPicker.value;
  updateWidget();
});

document.querySelectorAll('.color-swatch').forEach(swatch => {
  swatch.addEventListener('click', () => {
    const color = swatch.getAttribute('data-color');
    bgColorInput.value = color;
    bgColorPreview.style.background = color;
    bgColorPicker.value = color;
    updateWidget();
  });
});

document.addEventListener('click', (e) => {
  if (!e.target.closest('#colorPopup') && !e.target.closest('#bgColorPreview')) {
    document.getElementById('colorPopup').style.display = 'none';
  }
});

document.getElementById('text').addEventListener('input', updateWidget);
document.getElementById('fontSize').addEventListener('input', updateWidget);

window.addEventListener('DOMContentLoaded', () => {
  updateWidget();
});
</script>

</body>
</html>

