<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Widget Builder</title>
  <style>
  body {
    margin: 0;
    display: flex;
    height: 100vh;
    font-family: 'Noto Sans JP', sans-serif;
    background: #f0f2f5;
  }
  .sidebar {
    width: 320px;
    background: #f0f2f5;
    padding: 20px;
    box-sizing: border-box;
    border-right: 1px solid #ccc;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  .card {
    background: #ffffff;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    padding: 20px;
  }
  .main {
    flex-grow: 1;
    background: #ffffff;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 40px;
  }
  .widget {
    display: flex;
    justify-content: center;
    align-items: center;
    font-weight: bold;
    background-color: #191970;
    color: #ffffff;
    width: 300px;
    height: 150px;
    border-radius: 16px;
    box-shadow: 0 6px 12px rgba(0,0,0,0.15);
  }
  label {
    display: block;
    margin-bottom: 5px;
    font-size: 14px;
    color: #333;
  }
  input, select {
  width: 100%;
  box-sizing: border-box;
}

</style>

</head>
<body>

  <div class="sidebar">
  <div class="card">
    <h2>ウィジェット設定</h2>

    <label for="text">テキスト</label>
    <input type="text" id="text" value="こんにちは">

    <label for="fontSize">文字サイズ(px)</label>
<input type="number" id="fontSize" value="24">

<label for="fontFamily">フォント</label>
<select id="fontFamily">
  <option value="'Noto Sans JP', sans-serif">Noto Sans JP</option>
  <option value="'Arial', sans-serif">Arial</option>
  <option value="'Courier New', monospace">Courier New</option>
  <option value="'Yu Gothic', sans-serif">游ゴシック体</option>
</select>

    <label for="bgColor">背景色</label>
    <input type="color" id="bgColor" value="#191970">

    <label for="textColor">文字色</label>
    <input type="color" id="textColor" value="#ffffff">

    <label for="shape">形</label>
    <select id="shape">
      <option value="square">四角</option>
      <option value="rounded">丸みあり</option>
    </select>

    <label for="width">幅(px)</label>
    <input type="number" id="width" value="300">

    <label for="height">高さ(px)</label>
    <input type="number" id="height" value="150">

    <div style="margin-top: 30px;">
      <h3>このウィジェットのリンク</h3>
      <input type="text" id="generatedUrl" style="width: 100%; font-size: 14px; padding: 8px;" readonly>
    </div>
    </div>
  </div>

  <div class="main">
    <div class="widget" id="widget">
      こんにちは
    </div>
  </div>

  <script>
    const widget = document.getElementById('widget');

    function updateWidget() {
  const text = document.getElementById('text').value;
  const bgColor = document.getElementById('bgColor').value;
  const textColor = document.getElementById('textColor').value;
  const shape = document.getElementById('shape').value;
  const width = document.getElementById('width').value;
  const height = document.getElementById('height').value;
  const fontSize = document.getElementById('fontSize').value;
  const fontFamily = document.getElementById('fontFamily').value;

  widget.textContent = text;
  widget.style.backgroundColor = bgColor;
  widget.style.color = textColor;
  widget.style.width = width + 'px';
  widget.style.height = height + 'px';
  widget.style.fontSize = fontSize + 'px';
  widget.style.fontFamily = fontFamily;
  widget.style.borderRadius = shape === 'rounded' ? '16px' : '0px';

  // --- URL生成処理 ---
  const baseUrl = window.location.origin + window.location.pathname.replace('index.html', 'widget.html');
  const url = `${baseUrl}?text=${encodeURIComponent(text)}&bgColor=${encodeURIComponent(bgColor)}&textColor=${encodeURIComponent(textColor)}&shape=${shape}&width=${width}&height=${height}&fontSize=${fontSize}&fontFamily=${encodeURIComponent(fontFamily)}`;
  document.getElementById('generatedUrl').value = url;
}



    window.addEventListener('DOMContentLoaded', () => {
  document.querySelectorAll('input, select').forEach(el => {
    el.addEventListener('input', updateWidget);
    el.addEventListener('change', updateWidget); // ←これ超大事！！
  });
});



    updateWidget();
  </script>

</body>
</html>
